# 第一章 导论
## 操作系统目标
方便性（方便用户和机器底层交互），有效性（有效调用机器的各个组件功能，比如处理器和I/O）,可扩充性（随时添加新模块），开放性（遵循国际规范可以兼容其他OS）

## 操作系统作用
- 充当用户与计算机硬件间的接口
- 作为系统资源的调动者，这些资源归纳起来一共有四类：处理机，存储器(内存)，IO设备以及文件（数据和程序）。
- OS提供了计算机系统资源的抽象。这个意思是说用户无需从硬件接口这么底层来进行操作，它把比如I/O操作向上抽象了一层，就可以让用户自由的调用read/write操作。由此可知，OS是铺设在计算机硬件上的多层软件的集合,它增强了系统的功能，向下隐藏了系统硬件的具体细节，向上抽象了系统操作的多种模型。

## 操作系统基本特性
- 并发。实现了这个才能有效提高系统资源利用率和系统吞吐量。
    - 并发和并行的区别：首先并行就是指两个或多个事件在同一时刻进行；而并发的概念是指两个或多个事件在同一时间间隔内（比如一秒内）发生。那么简单来说，如果是双核系统，并行可以说是在双核上同时进行的事件，然而在每一个核上，多个事件可能并不从头到尾都具有执行权，他们是**交替进行**的，这就意味着他们是在同一时间间隔内完成的，依然可以称作是并发。多核系统可以把并发执行的程序分配到多个处理器上并行执行，所以这就是在说这两个概念并不互斥。
    - 进程的概念。如果不把任务按照进程分别调度，那么计算机只能串行的执行所有任务。引入进程之后，就可以为比如CPU计算和IO操作分别引入到进程中并发执行，提高系统效率。所谓进程，是指系统中能独立运行并且作为资源分配的基本单位，它是由一组机器指令、数据以及堆栈等组成的，是一个能独立运行的活动实体。同时多个进程之间也可以互换信息。
- 共享。操作系统的共享指的是资源共享或者复用，也就是说多个并发执行的进程来共同使用。宏观上限定了时间，也限定了地点。
    - 互斥共享：系统的某些资源，比如打印机等，在同一时刻只能一个进程来访问，这就需要互斥。这种一段时间内只允许一个进程访问的资源，被称为临界资源。
    - 同时访问：宏观意义上是同时访问，微观意义上其实是“交替”访问。典型的设备就是磁盘。
- 虚拟。把某种功能变成逻辑上若干个对应相同逻辑功能的技术。
    - 时分复用。也就是把某些服务提供用户服务时等待的时间拿来服务其他用户，这样再加之灵活调度就可以实现逻辑上的多个该服务，也就可以拿来同时给多个进程访问。比如虚拟处理机和虚拟设备（一条IO分成逻辑上的多个IO分别供给多个进程）
    - 空分复用
- 异步

## 操作系统主要功能
- 处理机管理。主要就是包括进程的控制，比如为每个作业创建多个进程来同时执行任务；还有就是进程的同步，这就是上面说的多进程访问某些资源的时候，按照临界资源和非临界资源选择是否互斥等等；进程间的通信，比如使用消息队列的方式；最后就是作业调度和进程调度的功能
- 存储器管理。这里主要说的就是内存，提高存储器利用率，方便用户使用并且能从逻辑上扩充内存。为此存储管理应该有内存分配与回收，内存保护和内存扩充等功能。
    - 内存分配：静态分配和动态分配（能否在内存中移动以及是否允许扩容）
    - 内存保护：确保用户程序都在自己的内存区内执行，互相不干扰；并且用户等级的进程不能去访问系统级别的程序和数据。一般实现是使用两个界限寄存器，分别用来保存地址的上下界
    - 地址映射
    - 内存扩充：借助虚拟内存技术从逻辑上扩大。 要完成这个，需要两点。一点是请求调入功能，他需要系统允许仅装入部分用户程序和数据就可以启动一个进程，这样就可以保证动态的插拔；还有就是允许置换内存，把暂时不用的内存转移到磁盘，并把这部分内存置换给需要的进程。
- 设备管理
    - 缓冲管理：CPU和IO设备之间要设置缓冲来平衡两部分读写速度的巨大差异；
- 文件管理
    - 文件存储空间
    - 目录管理：目录项包括每个文件的文件名，属性和在磁盘上的物理位置。这样就可以保证说提供名字就能找到一个文件
    - 文件读写保护

# 第二章 进程的描述和控制
## 一些概念
- 进程定义：系统进行资源分配和调度的一个独立单位
- PCB：为了能使参与并发执行的每个程序独立运行，在操作系统中为其分配的控制结构，称为进程控制块（PCB）
- 进程的三种状态：就绪态，执行态和阻塞态。下面分开说下
    - 就绪态：进程已经分配到除CPU以外的所有资源,得到CPU时间片之后即可运行。如果有多个就绪态进程，就放到就绪队列中等待
    - 执行态：已获得CPU时间片在运行中.可出于运行态的数量取决于CPU核心数
    - 阻塞态：正在执行的进程由于发生某些事件，比如IO请求，申请缓冲区失败等收到阻塞。此时OS发生进程调度,OS把处理机分配给另一个进程